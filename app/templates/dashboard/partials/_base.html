<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StocksCo Dashboard</title>
    <link rel="stylesheet" href="../../../static/css/dashboard/dashboard.css">
    <link rel="shortcut icon" href="../../static/images/favicon.png" type="image/x-icon">
    <!-- Google Font -->
    <link href="fonts.googleapis.com" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    {% block extra_css %}{% endblock %}
</head>

<body>
    <!-- Side Bar -->
    {% include "dashboard/partials/layouts/_sidebar.html" %}

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        {% include "dashboard/partials/layouts/_topbar.html" %}

        {% block content %} {% endblock %}
    </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            // Mobile menu toggle
            const hamburgerBtn = document.getElementById("hamburgerBtn");
            const sidebar = document.querySelector(".sidebar");
            const sidebarOverlay = document.getElementById("sidebarOverlay");

            hamburgerBtn.addEventListener("click", function () {
                sidebar.classList.toggle("mobile-open");
                sidebarOverlay.classList.toggle("active");

                // Change icon
                const icon = this.querySelector("i");
                if (sidebar.classList.contains("mobile-open")) {
                    icon.classList.remove("fa-bars");
                    icon.classList.add("fa-times");
                } else {
                    icon.classList.remove("fa-times");
                    icon.classList.add("fa-bars");
                }
            });

            // Close sidebar when clicking overlay
            sidebarOverlay.addEventListener("click", function () {
                sidebar.classList.remove("mobile-open");
                sidebarOverlay.classList.remove("active");
                const icon = hamburgerBtn.querySelector("i");
                icon.classList.remove("fa-times");
                icon.classList.add("fa-bars");
            });

            // Close sidebar when clicking a nav item on mobile
            document.querySelectorAll(".nav-item").forEach(item => {
                item.addEventListener("click", function () {
                    if (window.innerWidth <= 768) {
                        sidebar.classList.remove("mobile-open");
                        sidebarOverlay.classList.remove("active");
                        const icon = hamburgerBtn.querySelector("i");
                        icon.classList.remove("fa-times");
                        icon.classList.add("fa-bars");
                    }
                });
            });

            // Make flash message disappear after 5 seconds

            document.addEventListener('DOMContentLoaded', function () {
                const alerts = document.querySelectorAll('.flash-container .alert');

                alerts.forEach(alert => {
                    setTimeout(() => {
                        alert.classList.add('slide-out');
                        setTimeout(() => alert.remove(), 500);
                    }, 5000); // Disappears after 5 seconds
                });
            });

            function switchWatchlistTab(tabName) {
                // Remove active class from all tabs and contents
                document.querySelectorAll('.watchlist-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelectorAll('.watchlist-content').forEach(content => {
                    content.classList.remove('active');
                });

                // Add active class to clicked tab
                document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

                // Show corresponding content
                document.getElementById(`watchlist-${tabName}`).classList.add('active');
            }
        </script>
        {% block extra_js %}{% endblock %}

</body>

</html>