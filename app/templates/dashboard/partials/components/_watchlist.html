{% block extra_css %}<link rel="stylesheet" href="../../../../static/css/dashboard/components/watchlist.css">{% endblock %}

<!-- Watchlist Card -->
<div class="card">
    <div class="card-header">
        <div class="card-title" style="display: flex; align-items: center; gap: 8px;">
            <i class="fas fa-eye" style="color: var(--primary-blue);"></i>
            Watchlist
        </div>
    </div>
    
    <!-- Tab Buttons -->
    <div class="watchlist-tabs">
        <button class="watchlist-tab active" data-tab="new" onclick="switchWatchlistTab('new')">New</button>
        <button class="watchlist-tab" data-tab="trending" onclick="switchWatchlistTab('trending')">Trending</button>
        <button class="watchlist-tab" data-tab="gainers" onclick="switchWatchlistTab('gainers')">Gainers & losers</button>
    </div>
    
    <!-- Table Headers -->
    <div class="watchlist-headers">
        <div>Name</div>
        <div>Market Cap</div>
        <div>Change</div>
    </div>
    
    <!-- Tab Content: New -->
    <div class="watchlist-content active" id="watchlist-new">
        
        {% for stock in all_stocks[:5] %}
        <div class="watchlist-item">
            <div class="stock-info">
                <div class="stock-logo">
                    <img src="{{ stock.logo }}" alt="{{ stock.name }} logo" max-width="30" height="30">
                </div>
                <div>
                    <div class="stock-name">{{ stock.name.split(" ")[0].split(".")[0] }}</div>
                    <div class="stock-symbol">{{ stock.symbol }}</div>
                </div>
            </div>
            <div class="stock-volume">${{ stock.marketCap | compact }}</div>
            <div class="stock-change {{ 'positive' if stock.change >= 0 else 'negative' }}">{{ stock.change }}%</div>
        </div>
        {% endfor %}
    </div>
    
    <!-- Tab Content: Trending -->
    <div class="watchlist-content" id="watchlist-trending"> 
        {% for stock in trending_stocks[:5] %}
        <div class="watchlist-item">
            <div class="stock-info">
                <div class="stock-logo">
                    <img src="{{ stock.logo }}" alt="{{ stock.name }} logo" max-width="30" height="30">
                </div>
                <div>
                    <div class="stock-name">{{ stock.name.split(" ")[0].split(".")[0] }}</div>
                    <div class="stock-symbol">{{ stock.symbol }}</div>
                </div>
            </div>
            <div class="stock-volume">${{ stock.marketCap | compact }}</div>
            <div class="stock-change {{ 'positive' if stock.change >= 0 else 'negative' }}">{{ stock.change }}%</div>
        </div>
        {% endfor %}
    </div>
    
    <!-- Tab Content: Gainers & Losers -->
    <div class="watchlist-content" id="watchlist-gainers">
        {% for stock in gainers_losers_stocks %}
        <div class="watchlist-item">
            <div class="stock-info">
                <div class="stock-logo">
                    <img src="{{ stock.logo }}" alt="{{ stock.name }} logo" max-width="30" height="30">
                </div>
                <div>
                    <div class="stock-name">{{ stock.name.split(" ")[0].split(".")[0] }}</div>
                    <div class="stock-symbol">{{ stock.symbol }}</div>
                </div>
            </div>
            <div class="stock-volume">${{ stock.marketCap | compact }}</div>
            <div class="stock-change {{ 'positive' if stock.change >= 0 else 'negative' }}">{{ stock.change }}%</div>
        </div>
        {% endfor %}
    </div>

        
    
    <!-- View All Link -->
    <!-- <div class="view-all-link">
        <a href="/watchlist">View all</a>
    </div> -->
</div>