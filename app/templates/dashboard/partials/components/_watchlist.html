<!-- Watchlist Card -->
<div class="card">
    <div class="card-header">
        <div class="card-title" style="display: flex; align-items: center; gap: 8px;">
            <i class="fas fa-eye" style="color: var(--primary-blue);"></i>
            Watchlist
        </div>
    </div>
    
    <!-- Tab Buttons -->
    <div class="watchlist-tabs">
        <button class="watchlist-tab active" data-tab="new" onclick="switchWatchlistTab('new')">New</button>
        <button class="watchlist-tab" data-tab="trending" onclick="switchWatchlistTab('trending')">Trending</button>
        <button class="watchlist-tab" data-tab="gainers" onclick="switchWatchlistTab('gainers')">Gainers & losers</button>
    </div>
    
    <!-- Table Headers -->
    <div class="watchlist-headers">
        <div>Name</div>
        <div>Volume</div>
        <div>Change</div>
    </div>
    
    <!-- Tab Content: New -->
    <div class="watchlist-content active" id="watchlist-new">
        {% set new_stocks = [
            {'name': 'Apple', 'symbol': 'AAPL', 'icon': 'fab fa-apple', 'volume': '$27.5M', 'change': '+21.75', 'positive': true},
            {'name': 'Amazon', 'symbol': 'AMZN', 'icon': 'fab fa-amazon', 'volume': '$27.5M', 'change': '+21.75', 'positive': true},
            {'name': 'Apple', 'symbol': 'AAPL', 'icon': 'fab fa-apple', 'volume': '$27.5M', 'change': '-21.75', 'positive': false},
            {'name': 'Amazon', 'symbol': 'AMZN', 'icon': 'fab fa-amazon', 'volume': '$27.5M', 'change': '+21.75', 'positive': true}
        ] %}
        
        {% for stock in new_stocks %}
        <div class="watchlist-item">
            <div class="stock-info">
                <div class="stock-logo">
                    <i class="{{ stock.icon }}" style="font-size: 20px;"></i>
                </div>
                <div>
                    <div class="stock-name">{{ stock.name }}</div>
                    <div class="stock-symbol">{{ stock.symbol }}</div>
                </div>
            </div>
            <div class="stock-volume">{{ stock.volume }}</div>
            <div class="stock-change {{ 'positive' if stock.positive else 'negative' }}">{{ stock.change }}%</div>
        </div>
        {% endfor %}
    </div>
    
    <!-- Tab Content: Trending -->
    <div class="watchlist-content" id="watchlist-trending">
        {% set trending_stocks = [
            {'name': 'Tesla', 'symbol': 'TSLA', 'icon': 'fas fa-bolt', 'volume': '$45.2M', 'change': '+35.42', 'positive': true},
            {'name': 'Meta', 'symbol': 'META', 'icon': 'fab fa-meta', 'volume': '$38.7M', 'change': '+28.91', 'positive': true},
            {'name': 'Nvidia', 'symbol': 'NVDA', 'icon': 'fas fa-microchip', 'volume': '$52.1M', 'change': '+42.15', 'positive': true},
            {'name': 'Microsoft', 'symbol': 'MSFT', 'icon': 'fab fa-microsoft', 'volume': '$41.3M', 'change': '+31.87', 'positive': true}
        ] %}
        
        {% for stock in trending_stocks %}
        <div class="watchlist-item">
            <div class="stock-info">
                <div class="stock-logo">
                    <i class="{{ stock.icon }}" style="font-size: 20px;"></i>
                </div>
                <div>
                    <div class="stock-name">{{ stock.name }}</div>
                    <div class="stock-symbol">{{ stock.symbol }}</div>
                </div>
            </div>
            <div class="stock-volume">{{ stock.volume }}</div>
            <div class="stock-change {{ 'positive' if stock.positive else 'negative' }}">{{ stock.change }}%</div>
        </div>
        {% endfor %}
    </div>
    
    <!-- Tab Content: Gainers & Losers -->
    <div class="watchlist-content" id="watchlist-gainers">
        {% set gainers_losers = [
            {'name': 'GameStop', 'symbol': 'GME', 'icon': 'fas fa-gamepad', 'volume': '$89.4M', 'change': '+156.73', 'positive': true},
            {'name': 'AMD', 'symbol': 'AMD', 'icon': 'fas fa-microchip', 'volume': '$67.2M', 'change': '+89.21', 'positive': true},
            {'name': 'Snapchat', 'symbol': 'SNAP', 'icon': 'fab fa-snapchat-ghost', 'volume': '$23.8M', 'change': '-45.67', 'positive': false},
            {'name': 'Netflix', 'symbol': 'NFLX', 'icon': 'fas fa-film', 'volume': '$31.5M', 'change': '-32.14', 'positive': false}
        ] %}
        
        {% for stock in gainers_losers %}
        <div class="watchlist-item">
            <div class="stock-info">
                <div class="stock-logo">
                    <i class="{{ stock.icon }}" style="font-size: 20px;"></i>
                </div>
                <div>
                    <div class="stock-name">{{ stock.name }}</div>
                    <div class="stock-symbol">{{ stock.symbol }}</div>
                </div>
            </div>
            <div class="stock-volume">{{ stock.volume }}</div>
            <div class="stock-change {{ 'positive' if stock.positive else 'negative' }}">{{ stock.change }}%</div>
        </div>
        {% endfor %}
    </div>
    
    <!-- View All Link -->
    <div class="view-all-link">
        <a href="/watchlist">View all</a>
    </div>
</div>

<style>
/* Watchlist Tabs */
.watchlist-tabs {
    display: flex;
    gap: 8px;
    margin-bottom: 5px;
    padding-bottom: 5px;
    border-bottom: 1px solid #E5E7EB;
}

.watchlist-tab {
    padding: 8px 16px;
    background: transparent;
    border: none;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 500;
    color: #6B7280;
    cursor: pointer;
    transition: all 0.2s;
}

.watchlist-tab:hover {
    background: #F3F4F6;
    color: #374151;
}

.watchlist-tab.active {
    background: #2563EB;
    color: white;
}

/* Table Headers */
.watchlist-headers {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    padding: 12px 16px;
    background: #F9FAFB;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 600;
    color: #6B7280;
    margin-bottom: 8px;
}

/* Watchlist Content */
.watchlist-content {
    display: none;
}

.watchlist-content.active {
    display: block;
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Watchlist Items */
.watchlist-item {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    align-items: center;
    padding: 14px 16px;
    border-radius: 8px;
    transition: background 0.2s;
}

.watchlist-item:hover {
    background: #F9FAFB;
}

.stock-info {
    display: flex;
    align-items: center;
    gap: 12px;
}

.stock-logo {
    width: 40px;
    height: 40px;
    background: #F3F4F6;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6B7280;
}

.stock-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-dark);
    margin-bottom: 2px;
}

.stock-symbol {
    font-size: 12px;
    color: #9CA3AF;
}

.stock-volume {
    font-size: 14px;
    color: #6B7280;
    font-weight: 500;
}

.stock-change {
    font-size: 14px;
    font-weight: 600;
    text-align: right;
}

.stock-change.positive {
    color: #0f9d58;
}

.stock-change.negative {
    color: #d93025;
}

/* View All Link */
.view-all-link {
    text-align: center;
    padding: 16px 0 4px 0;
    border-top: 1px solid #F3F4F6;
    margin-top: 12px;
}

.view-all-link a {
    font-size: 14px;
    color: #2563EB;
    font-weight: 600;
    text-decoration: none;
    transition: color 0.2s;
}

.view-all-link a:hover {
    color: #1D4ED8;
}

@media (max-width: 768px) {
    .watchlist-tabs {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }

    .watchlist-tabs::-webkit-scrollbar {
        display: none;
    }

    .watchlist-tab {
        white-space: nowrap;
        font-size: 12px;
        padding: 6px 12px;
    }

    .watchlist-headers,
    .watchlist-item {
        grid-template-columns: 1.5fr 1fr 1fr;
    }

    .stock-name,
    .stock-volume,
    .stock-change {
        font-size: 12px;
    }

    .stock-symbol {
        font-size: 11px;
    }

    .stock-logo {
        width: 36px;
        height: 36px;
    }

    .stock-logo i {
        font-size: 18px !important;
    }
}
</style>