{% block extra_css %}<link rel="stylesheet" href="../../../../static/css/dashboard/components/referrals-content.css">{% endblock %}


<!-- Referrals Page Content -->
<div class="referrals-container">
    <!-- Special Offer Banner -->
    <div class="offer-banner">
        <i class="fas fa-gift"></i>
        <div class="offer-content">
            <span class="offer-label">Special Offer</span>
            <span class="offer-text">Earn up to $10 per successful referral</span>
        </div>
    </div>

    <!-- How Referral Works -->
    <div class="how-it-works-section">
        <h2 class="section-title">How Referral Works</h2>
        
        <div class="steps-grid">
            <!-- Step 1 -->
            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-share-alt"></i>
                </div>
                <div class="step-content">
                    <div class="step-number">Step 1</div>
                    <h3 class="step-title">Share your referral link</h3>
                    <p class="step-description">Send your unique link to friends via WhatsApp, email, or social media</p>
                </div>
            </div>

            <!-- Step 2 -->
            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-user-plus"></i>
                </div>
                <div class="step-content">
                    <div class="step-number">Step 2</div>
                    <h3 class="step-title">Friend signs up and invests</h3>
                    <p class="step-description">Your friend creates an account and makes their first investment of $100+</p>
                </div>
            </div>

            <!-- Step 3 -->
            <div class="step-card">
                <div class="step-icon">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="step-content">
                    <div class="step-number">Step 3</div>
                    <h3 class="step-title">You earn rewards</h3>
                    <p class="step-description">Get $10 credited to your account once your friend completes their first trade</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Referral Link Section -->
    <div class="referral-link-section">
        <div class="link-container">
            <div class="link-header">
                <h3 class="link-title">Your Referral Link</h3>
                <p class="link-description">Share this link with friends to start earning rewards</p>
            </div>

            <div class="link-input-group">
                <input type="text" value="stocksco.app/ref/{{ referral_code|default('BILLY23') }}" class="link-input" id="referralLink" readonly>
                <button class="copy-btn" onclick="copyReferralLink()">
                    <i class="fas fa-copy"></i> Copy Link
                </button>
            </div>

            <div class="share-buttons">
                <button class="share-btn whatsapp">
                    <i class="fab fa-whatsapp"></i> Share on Whatsapp
                </button>
                <button class="share-btn twitter">
                    <i class="fab fa-twitter"></i> Share on Twitter
                </button>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-cards">
            <div class="stat-card blue">
                <div class="stat-icon">
                    <i class="fas fa-dollar-sign"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Total Invites</div>
                    <div class="stat-value">{{ total_invites|default(24) }}</div>
                </div>
            </div>

            <div class="stat-card green">
                <div class="stat-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Successful Referrals</div>
                    <div class="stat-value">{{ successful_referrals|default(12) }}</div>
                </div>
            </div>

            <div class="stat-card orange">
                <div class="stat-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-label">Total Rewards</div>
                    <div class="stat-value">${{ total_rewards|default(120) }}</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Referral History -->
    <div class="history-section">
        <h2 class="section-title">Referral History</h2>

        <div class="card">
            <div class="history-table-wrapper">
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Reward</th>
                            <th>Status</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% set default_referrals = [
                            {'user': 'Sarah Johnson', 'reward': '$10', 'status': 'Pending', 'date': '20-12-2025'},
                            {'user': 'Mike Chen', 'reward': '$10', 'status': 'Completed', 'date': '20-12-2025'},
                            {'user': 'Emily Davis', 'reward': '$10', 'status': 'Pending', 'date': '20-12-2025'},
                            {'user': 'David Wilson', 'reward': '$10', 'status': 'Completed', 'date': '20-12-2025'},
                            {'user': 'Lisa Anderson', 'reward': '$10', 'status': 'Pending', 'date': '20-12-2025'}
                        ] %}

                        {% for referral in referrals|default(default_referrals) %}
                        <tr>
                            <td class="user-cell">{{ referral.user }}</td>
                            <td class="reward-cell">{{ referral.reward }}</td>
                            <td>
                                <span class="status-badge {{ referral.status.lower() }}">
                                    {{ referral.status }}
                                </span>
                            </td>
                            <td class="date-cell">{{ referral.date }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<script>
function copyReferralLink() {
    const input = document.getElementById('referralLink');
    input.select();
    document.execCommand('copy');
    
    // Show success message
    const btn = event.target.closest('.copy-btn');
    const originalText = btn.innerHTML;
    btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
    
    setTimeout(() => {
        btn.innerHTML = originalText;
    }, 2000);
}
</script>